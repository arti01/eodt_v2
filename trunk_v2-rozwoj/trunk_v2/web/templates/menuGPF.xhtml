<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <p:menubar>
        <p:menuitem style="background-color: #C1DFFF" value="Start" action="#{login.stronaIndex}" icon="ui-icon-refresh"/>

        <p:submenu style="width: 149px" label="Dokumenty">
            <p:submenu label="Konfiguracja" rendered="#{login.dcCfg}">
                <p:menuitem value="Grupy rodzajów" action="#{RodzajeGrupyCfg.list}" ajax="false"/>
                <p:menuitem value="Rodzaje" action="#{RodzajeCfg.list}" ajax="false"/>
                <p:menuitem value="Teczki" action="#{TeczkiCfg.list}" ajax="false"/>
                <p:menuitem value="Żródła" action="#{ZrodlaCfg.list}" ajax="false"/>
                <p:menuitem value="Kat. arch. w kom. merytorycznej" action="#{SymbMer1Cfg.list}" ajax="false"/>
                <p:menuitem value="Kat. arch. w innych komórkach" action="#{SymbMer2Cfg.list}" ajax="false"/>
                <p:menuitem value="Kontrahenci" action="#{KontrahenciCfg.list}" ajax="false"/>
            </p:submenu>    
            <p:submenu label="Rejestracja" rendered="#{login.dcRej}">
                <p:menuitem value="Emaile" action="#{RejEmaile.list}" ajax="false"/>
                <p:menuitem value="Poczekalnia" action="#{RejImpPlik.list}" ajax="false"/>
                <p:menuitem value="Rejestracja" action="#{RejestracjaRej.list}" ajax="false"/>
                <p:menuitem value="Lista kontrahentów" action="#{RejestracjaRej.kontrahentList}" ajax="false"/>
                <p:menuitem value="Raport pocztowy" action="#{RaportyRej.raportPocz}" ajax="false"/>
                <p:menuitem value="Wyszukaj" action="#{WyszukajRej.form}" ajax="false"/>
                <p:menuitem value="Do brakowania" action="#{BrakowanieRej.list}" ajax="false"/>
            </p:submenu>
            <p:submenu label="Odbiór" rendered="#{login.dcOdb}">
                <p:menuitem value="Do akceptacji" action="#{AkceptOdb.list}" ajax="false"/>
                <p:menuitem value="Historia akceptacji" action="#{HistOdb.list}" ajax="false"/>
                <p:menuitem value="Do wiadomości" action="#{DoWiadOdb.list}" ajax="false"/>
            </p:submenu>
        </p:submenu>

        <p:submenu style="width: 149px" label="Archiwum">
            <p:submenu label="Dokumenty - archiwum" rendered="#{login.dcArc}">
                <p:menuitem value="Do archiwum" action="#{PrzeniesArch.list}" ajax="false"/>
                <p:menuitem value="Poczekalnia" action="#{PoczekalniaArch.list}" ajax="false"/>
                <p:menuitem value="Archiwum" action="#{WArchiwumArch.list}" ajax="false"/>
                <p:menuitem value="Dokumenty" action="#{DokumentyArch.list}" ajax="false"/>
                <p:menuitem value="Wyszukaj w archiwum" action="#{WyszukajArch.form}" ajax="false"/>
            </p:submenu>
            <p:submenu label="Archiwum - raporty" rendered="#{login.dcArc}">
                <p:menuitem value="Do brakowania" action="#{BrakowanieArch.list}" ajax="false"/>
                <p:menuitem value="Zajętość Archiwów" action="#{ZajetoscArch.list}" ajax="false"/>
                <p:menuitem value="Niezwrócone" action="#{RaportyArch.nieZwrocone}" ajax="false"/>
                <p:menuitem value="Wydane wg osoby" action="#{RaportyArch.wydWgOsoby}" ajax="false"/>
            </p:submenu>
        </p:submenu>

        <p:submenu style="width: 149px" label="Rezerwacje" expanded="#{login.menuRezerExp}">
            <p:menuitem value="Dodawanie, modyfikacja, podgląd" action="#{RezerwacjeMg.list}" ajax="false"/>
            <p:menuitem value="Mój kalendarz" action="#{RezerMojKalMg.list}" ajax="false"/>
        </p:submenu>

        <p:submenu style="width: 149px" label="Zasoby Materiałowe">
            <p:menuitem value="Lista zasobów" action="#{UrzadzeniaMg.list}" ajax="false"/>
            <p:menuitem value="Lista dokumentów" action="#{URejDokMg.list}" ajax="false"/>
            <p:menuitem value="Raport stanów" action="#{UGrupaMg.raport1}" ajax="false"/>

            <p:submenu label="Konfiguracja" rendered="#{login.umCfg}">
                <p:menuitem value="Master Grupy" action="#{UMasterMg.list}" ajax="false"/>
                <p:menuitem value="Grupy" action="#{UGrupaMg.list}" ajax="false"/>
                <p:menuitem value="Drzewo" action="#{UStruktMg.list}" ajax="false"/>
            </p:submenu>
        </p:submenu>

        <p:submenu style="width: 149px" label="Struktura Org." rendered="#{login.struktura}">
            <p:menuitem value="Nowy pracownik" action="#{UsersM.nowy}" ajax="false"/>
            <p:menuitem value="Lista pracowników" action="#{UsersM.lista}" ajax="false"/>
            <p:menuitem value="Struktura osobowa" action="#{StruktOsM.lista}" ajax="false"/>
            <p:menuitem value="Struktura działów" action="#{StruktDzialM.lista}" ajax="false"/>
        </p:submenu>

        <p:submenu style="width: 149px" label="Obsługa urlopów" rendered="#{login.urlop}">
            <p:menuitem value="Twoje wnioski" action="#{UrlopM.list}" ajax="false"/>
            <p:menuitem value="Wnioski do akceptacji" action="#{UrlopM.listPodwl}" rendered="#{login.zalogowany.stKier or fn:length(login.zalogowany.userId.strukturaSec)>0}" ajax="false"/>
            <p:menuitem value="Historia wniosków" action="#{UrlopM.listPodwlHist}" rendered="#{login.zalogowany.stKier}" ajax="false"/>
            <p:menuitem value="Obce wnioski" action="#{UrlopObceM.list}" rendered="#{login.zalogowany.przyjmowanieWnioskow}" ajax="false"/>
            <p:menuitem value="Lista wszystkich wniosków" action="#{UrlopAll.list}" rendered="#{login.admin}" ajax="false"/>
        </p:submenu>

        <p:submenu label="Inne">
            <p:menuitem value="Repozytorium dokumentów" action="#{RepozytMg.list}" ajax="false"/>
            <p:menuitem value="Ogłoszenia - zarządzanie" action="#{OgloszeniaMg.list}" rendered="#{login.ogl}" ajax="false"/>
            <p:menuitem value="Zmiana hasła" action="#{login.htmlZmianaHasla}" 
                        rendered="#{(login.zalogowany.userId.extId=='' or fn:contains(login.zalogowany.userId.extId, '@') or fn:contains(login.zalogowany.userId.extId, 'FN')) and login.zalogowany!=null}" ajax="false"/>
            <p:menuitem value="Zarządzanie spółkami" action="#{SpolkiMg.list}" rendered="#{login.admin}" ajax="false"/>
            <p:menuitem value="Ustaw swojego zastępcę" action="#{UsersM.ustawZastepce}"  rendered="#{login.kierownik}" ajax="false"/>
            <p:menuitem rendered="#{fn:length(login.zalogowany.userId.wnLimity.ulimit)!=0}">
                Dostępny urlop:<br/>
                <strong>#{login.zalogowany.userId.wnLimity.ulimit}</strong>
            </p:menuitem>
        </p:submenu>

        <p:menuitem style="background-color: #C1DFFF" value="Wyjście" url="../logowanie/logout.jsp" ajax="false"/>
        <p:menuitem style="font-size: smaller; font-weight: bolder; margin-left: 50px;">
            Zalogowany jako: #{login.zalogowany.userId.fullname}, spółka: #{login.zalogowany.userId.spolkaId.nazwa}
        </p:menuitem>

    </p:menubar>
    <h:panelGroup rendered="#{fn:length(login.menuLinki)>0}">
        <h4>do pobrania</h4>
        <ul>
            <ui:repeat value="#{login.menuLinki}" var="menuLinki">
                <li>
                    <h:outputLink value="#{menuLinki.link}">
                        <h:outputText value="#{menuLinki.nazwa}"/>
                    </h:outputLink>
                    <h:outputText value="#{menuLinki.opis}"/>
                </li>
            </ui:repeat>
        </ul>
    </h:panelGroup>

</html>
