<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:rich="http://richfaces.org/rich"
      xmlns:p="http://primefaces.org/ui">
    <style>    
        ul.ui-menu-child
        {
            white-space: nowrap;
            width: auto !important;
        }
        .ui-tieredmenu{
            width: auto !important;
        }
    </style>
    <h:form>
        <p:tieredMenu>
            <p:menuitem value="Start" action="#{login.stronaIndex}" icon="ui-icon-refresh"/>
        </p:tieredMenu>

        <p:tieredMenu>
            <p:submenu label="Dokumenty - konfiguracja" rendered="#{login.dcCfg}">
                <p:menuitem value="Grupy rodzajów" action="#{RodzajeGrupyCfg.list}" />
                <p:menuitem value="Rodzaje" action="#{RodzajeCfg.list}"/>
                <p:menuitem value="Teczki" action="#{TeczkiCfg.list}"/>
                <p:menuitem value="Żródła" action="#{ZrodlaCfg.list}"/>
                <p:menuitem value="Kat. arch. w kom. merytorycznej" action="#{SymbMer1Cfg.list}"  style="width: 200px"/>
                <p:menuitem value="Kat. arch. w innych komórkach" action="#{SymbMer2Cfg.list}"/>
                <p:menuitem value="Kontrahenci" action="#{KontrahenciCfg.list}"/>
            </p:submenu>

            <p:submenu label="Dokumenty - rejestracja" rendered="#{login.dcRej}">
                <p:menuitem value="Emaile" action="#{RejEmaile.list}"/>
                <p:menuitem value="Poczekalnia" action="#{RejImpPlik.list}"/>
                <p:menuitem value="Rejestracja" action="#{RejestracjaRej.list}"/>
                <p:menuitem value="Lista kontrahentów" action="#{RejestracjaRej.kontrahentList}"/>
                <p:menuitem value="Raport pocztowy" action="#{RaportyRej.raportPocz}"/>
                <p:menuitem value="Wyszukaj" action="#{WyszukajRej.form}"/>
                <p:menuitem value="Do brakowania" action="#{BrakowanieRej.list}"/>
            </p:submenu>

            <p:submenu label="Dokumenty - odbiór" rendered="#{login.dcOdb}">
                <p:menuitem value="Do akceptacji" action="#{AkceptOdb.list}"/>
                <p:menuitem value="Historia akceptacji" action="#{HistOdb.list}"/>
                <p:menuitem value="Do wiadomości" action="#{DoWiadOdb.list}"/>
            </p:submenu>
        </p:tieredMenu>

        <p:tieredMenu>
            <p:submenu label="Dokumenty - archiwum" rendered="#{login.dcArc}">
                <p:menuitem value="Do archiwum" action="#{PrzeniesArch.list}"/>
                <p:menuitem value="Poczekalnia" action="#{PoczekalniaArch.list}"/>
                <p:menuitem value="Archiwum" action="#{WArchiwumArch.list}"/>
                <p:menuitem value="Dokumenty" action="#{DokumentyArch.list}"/>
                <p:menuitem value="Wyszukaj w archiwum" action="#{WyszukajArch.form}"/>
            </p:submenu>

            <p:submenu label="Archiwum - raporty" rendered="#{login.dcArc}">
                <p:menuitem value="Do brakowania" action="#{BrakowanieArch.list}"/>
                <p:menuitem value="Zajętość Archiwów" action="#{ZajetoscArch.list}"/>
                <p:menuitem value="Niezwrócone" action="#{RaportyArch.nieZwrocone}"/>
                <p:menuitem value="Wydane wg osoby" action="#{RaportyArch.wydWgOsoby}"/>
            </p:submenu>
        </p:tieredMenu>

        <p:tieredMenu>
            <p:menuitem value="Repozytorium" action="#{RepozytMg.list}"/>

            <p:menuitem value="Ogłoszenia - zarządzanie" action="#{OgloszeniaMg.list}" rendered="#{login.ogl}"/>

            <p:submenu label="Rezerwacje" expanded="#{login.menuRezerExp}">
                <p:menuitem value="Rezerwuj" action="#{RezerwacjeMg.list}"/>
            </p:submenu>
        </p:tieredMenu>

        <p:tieredMenu>
            <p:submenu label="Baza Zasobów Materiałowych" rendered="#{login.umSprz}">
                <p:menuitem value="Lista zasobów" action="#{URejDokMg.list}"/>
                <p:menuitem value="Lista dokumentów" action="#{UrzadzeniaMg.list}"/>
                <p:menuitem value="Raport stanów" action="#{UGrupaMg.raport1}"/>
            </p:submenu>

            <p:submenu label="Baza Zasob. Mat. - konfiguracja" rendered="#{login.umCfg}">
                <p:menuitem value="Master Grupy" action="#{UMasterMg.list}"/>
                <p:menuitem value="Grupy" action="#{UGrupaMg.list}"/>
                <p:menuitem value="Grupy" action="#{UGrupaMg.list}"/>
                <p:menuitem value="Drzewo" action="#{UStruktMg.list}"/>
            </p:submenu>
        </p:tieredMenu>

        <p:tieredMenu>
            <p:submenu label="Struktura organizacyjna" rendered="#{login.struktura}">
                <p:menuitem value="Nowy pracownik" action="#{UsersM.nowy}"/>
                <p:menuitem value="Lista pracowników" action="#{UsersM.lista}"/>
                <p:menuitem value="Struktura osobowa" action="#{StruktOsM.lista}"/>
                <p:menuitem value="Struktura działów" action="#{StruktDzialM.lista}"/>
            </p:submenu>
        </p:tieredMenu>

        <p:tieredMenu>
            <p:menuitem value="Zarządzanie spółkami" action="#{SpolkiMg.list}" rendered="#{login.admin}"/>
            <p:menuitem value="Ustaw swojego zastępcę" action="#{UsersM.ustawZastepce}"  rendered="#{login.kierownik}"/>
            <p:menuitem value="Lista wszystkich wniosków" action="#{UrlopAll.list}" rendered="#{login.admin}"/>
        </p:tieredMenu>

        <p:tieredMenu rendered="#{login.urlop}">
            <p:submenu label="Obsługa urlopów" rendered="#{login.struktura}">
                <p:menuitem value="Twoje wnioski" action="#{UrlopM.list}"/>
                <p:menuitem value="Wnioski do akceptacji" action="#{UrlopM.listPodwl}" rendered="#{login.zalogowany.stKier or fn:length(login.zalogowany.userId.strukturaSec)>0}"/>
                <p:menuitem value="Historia wniosków" action="#{UrlopM.listPodwlHist}" rendered="#{login.zalogowany.stKier}"/>
                <p:menuitem value="Obce wnioski" action="#{UrlopObceM.list}" rendered="#{login.zalogowany.przyjmowanieWnioskow}"/>
            </p:submenu>
        </p:tieredMenu>

        <p:tieredMenu>
            <p:menuitem value="Zmiana hasła" action="#{login.htmlZmianaHasla}" 
                        rendered="#{(login.zalogowany.userId.extId=='' or fn:contains(login.zalogowany.userId.extId, '@') or fn:contains(login.zalogowany.userId.extId, 'FN')) and login.zalogowany!=null}"/>
            <p:menuitem value="Wyjście" url="../logowanie/logout.jsp" />
            <p:menuitem >
                Zalogowany jako: #{login.zalogowany.userId.fullname}, <br/>spółka: #{login.zalogowany.userId.spolkaId.nazwa}
            </p:menuitem>
            <p:menuitem rendered="#{fn:length(login.zalogowany.userId.wnLimity.ulimit)!=0}">
                Dostępny urlop:<br/>
                <strong>#{login.zalogowany.userId.wnLimity.ulimit}</strong>
            </p:menuitem>
        </p:tieredMenu>


        <h:panelGroup rendered="#{fn:length(login.menuLinki)>0}">
            <h4>do pobrania</h4>
            <ul>
                <ui:repeat value="#{login.menuLinki}" var="menuLinki">
                    <li><rich:panel>
                            <h:outputLink value="#{menuLinki.link}">
                                <h:outputText value="#{menuLinki.nazwa}"/>
                                <br/>
                                <h:outputText value="#{menuLinki.opis}"/>
                            </h:outputLink>
                        </rich:panel>
                    </li>
                </ui:repeat>
            </ul>
        </h:panelGroup>
    </h:form>
</html>
