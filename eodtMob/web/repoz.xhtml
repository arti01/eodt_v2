<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pm="http://primefaces.org/mobile"
      xmlns:pe="http://primefaces.org/ui/extensions">


    <h:head>
        <meta name="viewport" content="width=1024, hight=600 user-scalable=no" />
        <style>
            .ui-timepicker-table td a{
                padding: .1em .2em .1em .3em;
                width: .9em;
            }
            .ui-btn {
                font-size: 12px;
            }
        </style>
    </h:head>
    <f:view renderKitId="PRIMEFACES_MOBILE" />
    <h:body>
        <pm:page id="primary">
            <h:form id="form">
                <pm:content id="content">
                    <p:panelGrid columns="2">        
                        <p:button outcome="/index.xhtml" value="powrót do menu"/>
                        <h:commandButton action="#{repozDokMg.zmienKatalog}" value="powrót do katalog: #{repozDokMg.parent.shortName}" rendered="#{repozDokMg.parent!=null}">
                            <f:setPropertyActionListener target="#{repozDokMg.current}" value="#{repozDokMg.parent}"/>
                            <f:setPropertyActionListener target="#{repozDokMg.parent}" value="#{repozDokMg.current.parent}"/>
                        </h:commandButton>
                        <p:button value="najwyższy poziom" rendered="#{repozDokMg.parent==null}"/>
                    </p:panelGrid>
                    <p:panel header=" katalog: #{repozDokMg.current.shortName}">
                        <p:dataList value="#{repozDokMg.biez}" var="plik" paginator="true" rows="10">
                            <h:commandLink action="#{repozDokMg.zmienKatalog}" rendered="#{plik.drz.type=='dir'}">
                                katalog: #{plik.drz.shortName}
                                <f:setPropertyActionListener target="#{repozDokMg.parent}" value="#{repozDokMg.current}"/>
                                <f:setPropertyActionListener target="#{repozDokMg.current}" value="#{plik.drz}"/>
                            </h:commandLink>
                            <p:commandLink rendered="#{plik.drz.type=='file'}" style="font-size: 0.7em; background-color: #1fb4c2" 
                                           oncomplete="PF('dialog').show();" update=":primary:form:dial">
                                dokument: #{plik.drz.shortName}
                                <f:setPropertyActionListener target="#{repozDokMg.zalDoWys}" value="#{plik.drz}"/>
                            </p:commandLink>
                        </p:dataList>
                    </p:panel>
                    <p:dialog widgetVar="dialog" closable="false" header="podaj email">
                        <h:panelGroup id="dial">
                            <pm:field rendered="#{repozDokMg.mess==''}">
                                <p:inputText id="emailAdr" value="#{repozDokMg.email}"/>
                                <p:commandButton action="#{repozDokMg.wyslijZal}" value="wyślij dokument: #{repozDokMg.zalDoWys.shortName}" update="@parent:dial"/>
                                <p:commandButton value="zamknij" oncomplete="PF('dialog').hide();">
                                    <f:setPropertyActionListener target="#{repozDokMg.mess}" value=""/>
                                </p:commandButton>
                            </pm:field>
                            <pm:field rendered="#{repozDokMg.mess!=''}">
                                <p:commandButton id="butZam" value="#{repozDokMg.mess} - zamknij" oncomplete="PF('dialog').hide();">
                                    <f:setPropertyActionListener target="#{repozDokMg.mess}" value=""/>
                                </p:commandButton>
                            </pm:field>
                        </h:panelGroup>
                    </p:dialog>
                </pm:content>
            </h:form>
        </pm:page>
    </h:body>
</html>